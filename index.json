[{"authors":null,"categories":null,"content":"I am a brazilian geographer looking foward to adress environmental challenges with geographical data science, taking the power of earth observation data, spatial statistics and software development.\nHow did I get here? While working with the assessment of the brazilian\u0026rsquo;s flora conservation status, I realized that, by that time, there was a lot to do and a few human resources. So, I decided to do a specialization in spatial statistics looking foward for tools that could help the assessment optimization. I ended with a statistical approach to estimated the exposure of floras' species over fire, one of the most known proxy of environmental degradation. If you are interested, the final paper is available here (pt-br).\nIn my master project I have worked with spatial priorization to make conservation and mineral exploration compatible on an Environmental Reserve in the Amazon forest. You can read more about this experience here or access the book with all project details (both in pt-br).\nIn the last few years I have been working with an international scientific group on reasearches developing algorithms and identifying priority areas for landscape restoration. This work resulted in the publication of several scientific publications.\n","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":-62135596800,"objectID":"26f7143ab6a67e9866e2f9d6bd18a253","permalink":"/author/felipe-sodre-mendes-barros/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/author/felipe-sodre-mendes-barros/","section":"authors","summary":"I am a brazilian geographer looking foward to adress environmental challenges with geographical data science, taking the power of earth observation data, spatial statistics and software development.\nHow did I get here?","tags":null,"title":"Felipe Sodré Mendes Barros","type":"authors"},{"authors":null,"categories":null,"content":"Flexibility This feature can be used for publishing content such as:\n Online courses Project or software documentation Tutorials  The courses folder may be renamed. For example, we can rename it to docs for software/project documentation or tutorials for creating an online course.\nDelete tutorials To remove these pages, delete the courses folder and see below to delete the associated menu link.\nUpdate site menu After renaming or deleting the courses folder, you may wish to update any [[main]] menu links to it by editing your menu configuration at config/_default/menus.toml.\nFor example, if you delete this folder, you can remove the following from your menu configuration:\n[[main]] name = \u0026quot;Courses\u0026quot; url = \u0026quot;courses/\u0026quot; weight = 50  Or, if you are creating a software documentation site, you can rename the courses folder to docs and update the associated Courses menu configuration to:\n[[main]] name = \u0026quot;Docs\u0026quot; url = \u0026quot;docs/\u0026quot; weight = 50  Update the docs menu If you use the docs layout, note that the name of the menu in the front matter should be in the form [menu.X] where X is the folder name. Hence, if you rename the courses/example/ folder, you should also rename the menu definitions in the front matter of files within courses/example/ from [menu.example] to [menu.\u0026lt;NewFolderName\u0026gt;].\n","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"59c3ce8e202293146a8a934d37a4070b","permalink":"/courses/example/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/courses/example/","section":"courses","summary":"Learn how to use Academic's docs layout for publishing online courses, software documentation, and tutorials.","tags":null,"title":"Overview","type":"docs"},{"authors":null,"categories":null,"content":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"74533bae41439377bd30f645c4677a27","permalink":"/courses/example/example1/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example1/","section":"courses","summary":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":null,"title":"Example Page 1","type":"docs"},{"authors":null,"categories":null,"content":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 4 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"1c2b5a11257c768c90d5050637d77d6a","permalink":"/courses/example/example2/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example2/","section":"courses","summary":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":null,"title":"Example Page 2","type":"docs"},{"authors":["Felipe"],"categories":null,"content":" Click on the Slides button above to view the built-in slides feature.   Slides can be added in a few ways:\n Create slides using Wowchemy\u0026rsquo;s Slides feature and link using slides parameter in the front matter of the talk file Upload an existing slide deck to static/ and link using url_slides parameter in the front matter of the talk file Embed your slides (e.g. Google Slides) or presentation video on this page using shortcodes.  Further event details, including page elements such as image galleries, can be added to the body of this page.\n","date":1906549200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1906549200,"objectID":"a8edef490afe42206247b6ac05657af0","permalink":"/talk/example-talk/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/talk/example-talk/","section":"event","summary":"An example talk using Wowchemy's Markdown slides feature.","tags":[],"title":"Example Talk","type":"event"},{"authors":[],"categories":["Python"],"content":"Como tudo começou:  Nota do autor: artigo publiciado em 27/04/2022:\n Estou trabalhando num projeto onde uma das funções do python é executada e recebe um um parâmtero pelo terminal. Um detalhe é que esse parâmetro é o nome de uma pessoa. Um ponto que não previ no processo de desenvolvimento é que nomes, como qualquer outro elemento textual da lingua portuguesa, podem ter acentos (ou \u0026ldquo;caracteres especiais\u0026rdquo;).\nPois é, foi praticamente sem querer que vi, olhando os logs produzidos, que os nomes com acento estavam com problema de encoding.\nE assim começou a minha caça ao bug. Uma caça que me tomou um dia e meio. Mas foi de grande aprendizado.\nUm pouco do contexto: Antes de descrever essa aventura, comento um pouco o fluxo do programa que apresentou erro:\n Uma função é executada pelo terminal e recebe um parâmtero, que é o nome de uma pessoa; Esse nome é usado para instanciar um objeto. Logo no __init__ tenho o ponto de acesso ao que foi informado pelo terminal com a incorporação do mesmo como atributo da instância. Alguns processamnetos, que não vem ao caso, são realizados; O log do processamento realizado é persistirdo numa base de dados usando o SQLAlchemy, onde a tabela que o recebe possui um campo id e outro json, com os logs organizados em tal formato.  E agora? Por onde começar? Buscando o bug no terminal\nComo o parâmetro estava sendo passado por terminal, achei que o problema estava nesse ponto: no terminal. Primeiro passo: checar o encoding usado pelo sistema. Mas logo vi que estava tudo em utf-8, o que por sí, não deveria apresentar problema.\nComo o nome estava sendo passado como um parâmetro do sistema a partir de uma variável, aproveitei para checar se o erro não estava aí. Nada que um print e alguns testes no terminal não resolva. E nada, os nomes armazenados na variáve e passados como parâmetro não sofriam qualquer alteração neste processo inicial.\nInterseção terminal/python\nAchei, então que o erro estava em alguma incompatibilidade entre o que era passado no terminal e o como o python estava recebendo.\nSegundo passo, então, foi checar o ponto de contato entre terminal e o python. Ler o seguinte trecho, de uma resposta do stackOverFlow me deu a certeza de que era aí o erro:\n When Python does not detect that it is printing to a terminal, sys.stdout.encoding is set to None.\n Ou seja, quando o python não pode detectar o que está sendo apresentado ao terminal o sys.stdout.encoding é definido como None; Ora, estou passando um parametro a partir de uma variável do terminal, logo um string. O Python não consegue identificar o encoding dessa string e está definindo, então o encoding a None, o que deve estar gerando o erro.\nTentando resolver isso, busquei alguma forma de declarar o encoding\u0026hellip; Cheguei a adicionar ao __init__, quando a classe é instanciada e recebe o nome da pessoa os métodos, .encode().decode('utf-8') ao objeto que recebe o valor. Parecia que ia funcionar, vejam:\nnome = 'Felipe Sodré' b'Felipe Sodr\\xc3\\xa9' # e ao adicionar o decode o texto volta ao normal... nome.encode().decode('utf-8') 'Felipe Sodré'  \u0026ldquo;Meio\u0026rdquo; gambiarra, não? Mas o importante é se funcionar.\nContudo, o que parecia a solução, foi logo por agua abaixo na primeira rodada de teste. O nome continua com erro de encoding.\nDecidí, então, usar o módulo logging para apresentar o nome recebido pelo terminal e nome após a classe estar instanciada durante o processamento. Aliás, o @dunosauro apresentou uma live muito boa sobre o uso do logging\u0026hellip;\nBom, ao usar o logging tive certeza de que estava tentando resolver o erro no ponto errado, todas as mensagens de log estavam sem o tal erro de encoding, mas no log persistido no banco de dados seguia com o maldito erro\u0026hellip;\nSerá que o banco de dados está configurado com uma encoding diferente?\nNo banco de dados\u0026hellip;\n✔️ Banco configurado como \u0026lsquo;utf-8\u0026rsquo;;\nAté que me veio uma luz: nas mensagens de log o nome está sem erro. Mas o log que está sendo persistido no banco de dados ( que são algumas dessas mensagens filtradas para monitorar alguns pontos importantes do sistema) é uma compilação salva em um campo JSON.\n\u0026ldquo;Bom deve ser nesse ponto, então.\u0026rdquo;, pensei.\nReproduzindo o erro em JSON\nParti então para tentar reproduzir esse erro:\n\u0026gt;\u0026gt;\u0026gt;import json \u0026gt;\u0026gt;\u0026gt;info = {'nome':'Felipe Sodré', 'idade':38} \u0026gt;\u0026gt;\u0026gt;info {'nome': 'Felipe Sodré', 'idade': 28} \u0026gt;\u0026gt;\u0026gt;json.dumps(info) '{\u0026quot;nome\u0026quot;: \u0026quot;Felipe Sodr\\xc3\\xa9\u0026quot;, \u0026quot;idade\u0026quot;: 38}'  Pronto! Aí está o problema. No processo de conversão do dicionário ao JSON, há algum tipo de conversão que gera o erro de encoding.\nNão levei \u0026ldquo;muito tempo\u0026rdquo; (tempo é relativo, né?) para encontrar que o método dumps() possui o parâmetro ensure_ascii, com valor padrão True, que garante que as strings do JSON que possuam caracteres não-ASCII estejam com scape.:\n If ensure_ascii is true (the default), the output is guaranteed to have all incoming non-ASCII characters escaped. If ensure_ascii is false, these characters will be output as-is.\n Testei usando o dumps() com ensur_ascii=False:\n\u0026gt;\u0026gt;\u0026gt;json.dumps(info, ensure_ascii=False) '{\u0026quot;nome\u0026quot;: \u0026quot;Flávia Duarte Nascimento\u0026quot;, \u0026quot;idade\u0026quot;: 12}'  Pronto, ponto de erro encontrado. Basta adicionar o parâmetro apra False e tudo se resolveria.\nMas não foi bem assim, ainda faltava um ponto. Eu não estava gerando o dump e salvando no banco. O que estou fazendo é passar o dado, ainda em dicionário, para o banco usando o SQLAlchemy e ele cuida disso para mim.\nComo, ou melhor, onde, então, eu devo informar esse ensure_ascii?\nEnfim, a solução: Foi lendo essa responta no SOF que entendí que como o ORM SQLAlchemy está cuidadno disso para mim, ele possui um serializador e que o mesmo é, nada mais, nada menos que os métodos jason.dumps() e json.loads(), passados na função create_engine como um kwargs:\nengine = create_engine(..., json_serializer=dumps)\nO golpe final foi ao ler a docuementação do SQLAlchemy sobre o tipo de dado JSON e aprender que podemos customizar o serializador. Olha só o exemplo da documentação, me dando de \u0026ldquo;bandeja\u0026rdquo; a solução para o bug em questão:\nengine = create_engine( \u0026quot;sqlite://\u0026quot;, json_serializer=lambda obj: json.dumps(obj, ensure_ascii=False))  Agora sim, vida que segue, graças à persistẽncia e perseverança na caça aos bugs.\nAh, claro. Essa investigação contou com a ajuda de outros colegas que dedicaram alguns minutos para conversar e propor soluções, tabém. Muito obrigado!\n nota do autor: artigo publiciado em 27/04/2022:\n Quando achei que estava tudo funcionando e coloquei em produção a correção, eis que me deparo com um novo erro. Dessa vez um TypeError:\nraise TypeError(f'Object of type {o.__class__.__name__} ' sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type datetime is not JSON serializable  Com algumas pesquisas, pude identificar que, como estou indicando um serializador, Todo objeto a ser inluido no JSON passará por ele. Mas, como o próprio erro informa, um objeto datetime não pode ser seriaizado. E por isso que o método json.dumps(), além de ter o parâmetro ensure_ascii, possui um argumento para a serialização padrão.\nPortanto o último bug foi resolvido usando o parâmetro default=str. Ou seja, o serializador padrãoa pe transformar o objeto a uma classe string.\nO codigo ficou, então da seguinte forma:\nengine = create_engine( \u0026quot;sqlite://\u0026quot;, json_serializer=lambda obj: json.dumps(obj, ensure_ascii=False, default=str))  E vocês, que estratégias adotam na caça aos bugs?\nNote: image from @ThePracticalDev\n","date":1649980800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1650023953,"objectID":"c0e49d9e5b06e9cf4a0d989ca7de84d1","permalink":"/post/bug-buster/","publishdate":"2022-04-15T00:00:00Z","relpermalink":"/post/bug-buster/","section":"post","summary":"Como tudo começou:  Nota do autor: artigo publiciado em 27/04/2022:\n Estou trabalhando num projeto onde uma das funções do python é executada e recebe um um parâmtero pelo terminal.","tags":["Python","Autonomia","Bug fixing","pt-br"],"title":"Bug buster","type":"post"},{"authors":[],"categories":null,"content":"Hacktoberfest: Colaborações e aprendizados Artigo publicado também no linkedin.\nO HacktoberFest é um evento promovido pela Digital Ocean durante o mês de outubro e já está na sua oitava edição. O objetivo é incentivar a colaboração em projetos de código aberto e, claro, como uma forma de democratizar o conhecimento em sistemas de versionamento, como o git, além de outras tecnologias.\n \u0026hellip;Ah, e o incentivo vem com a possibilidade de ganhar uma camisa do evento ao ter aprovado quatro pull requests em repositórios participantes (para participar, basta adicionar a tag \u0026ldquo;Hactoberfest\u0026rdquo; ao repositório ou adicionar a tag \u0026ldquo;Hacktoberfest-accepted\u0026rdquo; no Pull request em questão).\n Não foi minha primeira participação, mas foi a primeira vez que pude colaborar em projetos diferentes daqueles relacionados ao meu trabalho cotidiano. E já fazia algum tempo que tinha interesse em colaborar, mas não sabia como quebrar a inércia. Compartilho neste artigo, alguns projetos desenvolvidos este ano e o que pude aprender nos mesmos.\nFogo Cruzado O projeto Fogo Cruzado foi desenvolvido pela Volt Data Lab e Instituto Fogo Cruzado, como um sistema Crowdsourcing para monitoramento dos tiroteios no Rio de Janeiro e/ou em Recife. O mesmo disponibiliza uma API para acessar aos dados, bastando criar um usuário, sem custo. E o projeto já tem um pacote para acessar os dados pelo R.\nComo faltava um módulo python para acessar os dados do projeto, decidi fazê-lo durante o #Hacktoberfest. Esse foi o primeiro projeto: um módulo python para acessar os dados da API, direto do python.\nFoi um desafio legal e, até certa forma, simples, pois eu já tinha um modelo de como funcionava o pacote em R. Então o trabalho foi, principalmente \u0026ldquo;traduzir\u0026rdquo; ao python. Com isso aproveitei para refatorar algumas partes do código.\nNo geral, posso dizer que ao desenvolver esse projeto, aprendi sobre:\n Python-poetry (do zero); Validação de login usando variáveis do sistema; Publicação de módulos no PyPi;  E fica como desafios para melhor/implementar em breve:\n Melhorar o código com type annotation; Criação de documentação com Sphynx (se alguém quiser sugerir outra alternativa será bem-vinda);  PyInaturalist-convert O segundo projeto que atuei nesse mês foi no PyInaturalist-convert. A história deste módulo é bem interessante e surge de uma demanda pessoal: O IMiBio, Instituição onde trabalho, está desenvolvendo um projeto com o INaturalist, uma aplicação de crowdsourcing para observação de biodiversidade, e eu tive que criar um sistema que acesse os dados do projeto usando a API deles. Com isso, conheci o módulo PyINaturalist. Conversando com os desenvolvedores, comentei que seria interessante ter os dados no padrão darwincore. Um deles achou pertinente e começamos a desenvolver juntos. Contudo, fiquei uns bons meses afastado do projeto e ao voltar, já era um pacote bem estruturado. Por isso, para entender a estrutura do mesmo e saber por onde começar, além de ler as issues abertas, adotei a estratégia de ler os testes\u0026hellip;\n\u0026hellip; E foi lendo os testes que percebi que estavam implementando um objeto geojson, \u0026ldquo;na unha\u0026rdquo;. Como estive estudando sobre o geojson (e, inclusive foi um dos temas explorados por mim em outros artigos, propus usá-lo. Com isso, poderíamos usar os métodos de validação já implementados no módulo, garantindo consistência aos dados;\nAo colaborar no módulo PyInaturalist-converter, aprendi sobre:\n Como colaborar a um projeto já estruturado. Tenho certeza que essa não é uma regra. Mas foi uma boa estratégia começar lendo os testes; Mais aprendizados sobre python-poetry :); Soube da existência do formatador de código [Black](The Uncompromising Code Formatter); Soube da existencia do ISORT, para padronizar os imports;  Além desses aprendizados, o autor principal do módulo já tinha configurado no repositório um fluxo de ações e validações bem interessantes. Dessa forma, havia um sistema de validação do que se estava propondo como pull request. Ainda não tive tempo de me aprofundar, mas já está na lista de estudos futuros\u0026hellip;\nAnálise espacial no frontend Uma última atividade que queria compartilhar, não está relacionada a uma contribuição minha, mas sim, um projeto ao qual eu recebi ajuda.\nPubliquei recentemente um artigo apresentando alguns módulos de JavaScript que nos permitem fazer algumas análises espaciais sem depender de uma infraestrutura de servidores de dados e de mapas.\nEu fui apresentado a essas tecnologias no FOSS4G 2021 e por pura curiosidade, já que frontend não é a \u0026ldquo;minha praia\u0026rdquo;, comecei a fazer alguns testes como estratégia de estudos, mesmo.\nPude evoluir bastante com os estudos, mas num momento vi que poderia ser feito muito mais, mas que eu não tinha conhecimento técnico em JS para isso. Não tive dúvidas em contactar um amigo que trabalha com JS e apresentei a ele o que estava tentando fazer. Ele curtiu e acabou colaborando com o projeto, transformando essa prova de conceito numa solução, em algo realmente interessante.\nPercebam que essa colaboração não surgiu pelo Hacktoberfest. Mas por uma mudança de postura minha em me conectar com outras pessoas e apresentar o que eu estava estudando, as \u0026ldquo;minhas dores\u0026rdquo; e o que pretendia fazer.\nNeste projeto estudei e aprendi sobre:\n  O georaster, uma biblioteca JavaScript que nos permite carrregar, e até mesmo criar, dados raster a partir de objetos JavaScript;\n  georaster-layer-for-leaflet que é uma biblioteca que nos permite apresentar dados raster (a princípio geotif) nos mapas feitos em leaflet;\n  geoblaze que é um pacote desenvolvido em JavaScript para permitir analisar dados carregados como georaster.\n  Como resultado, criamos dois visualizadores de dados raster apenas com tecnologia frontend. No primeiro o usuário interage com o pixel (clicando num píxel específico) e o gráfico apresenta o comportamento temporal daquele pixel; No segundo visualizador o usuário clica em um dos estados e o gráfico apresenta o valor médio dos pixels daquele estado ao longo do tempo.\n  Notas finais sobre Hacktoberfest Entendo que muitos \u0026ldquo;torcem o nariz\u0026rdquo; para o Hacktoberfest, pois poucos o utilizam como uma estratégia de estudos, crescimento ou colaboração a projeto de código aberto, que são os objetivos principais. A ideia de escrever sobre as colaborações feitas é justamente destacar que o evento é uma grande estratégia/ferramenta para aprender mais, conectar-se com outros desenvolvedores e se engajar em projetos de código aberto.\nEspero que os meus aprendizados serviam de motivação aos demais. Qualquer coisa, fico à disposição para conversar mais a respeito.\nArtigo publicado também no linkedin.\n","date":1636070400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1620782712,"objectID":"8ff92882b9751e4dcb204d32d6f2e49b","permalink":"/post/hacktoberfest-2021/","publishdate":"2021-11-05T00:00:00Z","relpermalink":"/post/hacktoberfest-2021/","section":"post","summary":"Hacktoberfest: Colaborações e aprendizados Artigo publicado também no linkedin.\nO HacktoberFest é um evento promovido pela Digital Ocean durante o mês de outubro e já está na sua oitava edição. O objetivo é incentivar a colaboração em projetos de código aberto e, claro, como uma forma de democratizar o conhecimento em sistemas de versionamento, como o git, além de outras tecnologias.","tags":["Software Livre","Hacktoberfest","Autonomia","pt-br"],"title":"Hacktoberfest 2021","type":"post"},{"authors":[],"categories":null,"content":"Criando um sistema para gestão de dados geográficos de forma simples e robusta Artigo publicado também no linkedin.\nEste ano pude participar do projeto de jornalismo de dados Engolindo Fumaça, desenvolvido pelo InfoAmazonia. Foi um projeto bem desafiador que me trouxe vários aprendizados. Muitos deles já viraram artigos, como os de cubo de dados.\nAinda que o projeto tenha sido um sucesso (inclusive, foi um dos finalistas do prêmio de jornalismo de dados Cláudio Weber Abramo ) alguns desafios ficaram pendentes. Um deles está com a possibilidade de apresentar dados raster em um sistema webmap, sem dispor de grande infraestrutura de SIG, como base de dados e servidor de mapas, PostGIS e geoserver, respectivamente. Afinal, após todo o processo de análise de dados e produção das matérias, era importante apresentar os dados de forma interativa.\nAliás, desenvolvimento de soluções com dados espaciais com infraestrutura limitada tem sido um tema explorado por mim em alguns artigos.\nEntão, em resumo, a necessidade era: apresentar as imagens de satélite utilizadas nas reportagens em um mapa dinâmico, sem depender de um servidor de mapas, para que os leitores da matéria pudessem explorar os dados. Algo similar a um dashboard.\nPois foi ao moderar uma sessão da conferência Free and Open Source Software for Geospatial (#FOSS4G) deste ano que, sem querer, me deparei com as possíveis soluções. A solução seria transportar a responsabilidade de carregar, apresentar e calcular algumas estatísticas ao frontend, usando o conjunto de bibliotecas georaster, georaster-layer-for-leaflet e geoblaze. A apresentação que me dispertou para essas ferramentas foi feita pelo Daniel Dufour sobre o geoblaze.\n georaster é uma biblioteca JavaScript que nos permite carrregar, e até mesmo criar, dados raster a partir de objetos JavaScript; georaster-layer-for-leaflet é uma biblioteca que nos permite apresentar dados raster (a princípio geotif) nos mapas feitos em leaflet; geoblaze é um pacote desenvolvido em JavaScript para permitir analisar dados carregados como georaster.  Dessa forma, com essa stack the bibliotecas poderemos carregar uma imagem raster georreferenciada, extrair estatísticas gerais e espaciais, bem como aplicar alguns processamentos, como algebra de bandas e apresentá-las em um webmap leaflet. Tudo isso sem depender de uma infraestrutura de backend. Tudo sendo processado no frontend. Sim, essa solução pode ser limitada para alguns casos. Mas nem todos.\nE, por isso, decidi explorar essa alternativa, ainda que frontend (e JavaScript) não seja a \u0026ldquo;minha praia\u0026rdquo;. A verdade é que não consegui conter o entusiasmo e parti para uma prova conceitual. Compartilho a prova de conceito que fiz, usando o observablehq (uma espécie de jupyter-notebook para programação frontend).\nAproveitei para consolidar o resultado em uma landingpage. Nela, além de apresentar o raster, foi possível garantir que o usuário possa interagir com o mesmo, de duas formas distintas:\n Clicando em um pixel;   ou clicando em um dos polígonos que representam os limites dos estados que compõem a Amazônia Legal. (⚠️ não estamos representando o estado do Maranhão já que o mesmo não é contemplado integramente na Amazônia Legal);  Em ambas implementações os valores dos pixels são extraídos just-in-time e o gráfico em plotly é atualizado representando o comportamento temporal dos mesmos. Tais dados se referem a Material Particulado \u0026lt; 2.5 do ano de 2020. No gráfico, apresentamos, ainda, o valor máximo sugerido pela Organização Mundial da Saúde (World Health Organization - WHO).\nEssas duas implementações visam explorar oportunidades diferentes das ferramentas em questão. Separamos os resultados em duas páginas diferentes: clicando pixel a pixel; clicando num polígono;\nE, é lógico: tenho tudo documentado no github.\nNão posso deixar de mencionar que o projeto só foi possível com a ajuda do Kyle Felipe quem, inclusive, foi o responsável pela evolução do projeto implementando a solução em JS baseada na seleção de polígonos.\nEspero que seja útil :)\nArtigo publicado também no linkedin.\n","date":1635724800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1635816312,"objectID":"aa78d841eaf838d28717ae71a18a734c","permalink":"/post/analise-espacial-frontend/","publishdate":"2021-11-01T00:00:00Z","relpermalink":"/post/analise-espacial-frontend/","section":"post","summary":"Criando um sistema para gestão de dados geográficos de forma simples e robusta Artigo publicado também no linkedin.\nEste ano pude participar do projeto de jornalismo de dados Engolindo Fumaça, desenvolvido pelo InfoAmazonia.","tags":["Software Livre","Hacktoberfest","Autonomia","pt-br","JS"],"title":"Análise espacial no frontend","type":"post"},{"authors":[],"categories":[],"content":"Criando um sistema para gestão de dados geográficos de forma simples e robusta II Artigo publicado também no linkedin\nNa primeira publicação onde exploro a possibilidade de implementar um sistema de gestão de dados geoespaciais com Django, sem a necessidade de usar um servidor com PostGIS, vimos sobre:\n o django-geojson para simular um campo geográfico no models; o geojson para criar um objeto da classe geojson e realizar as validações necessárias para garantir robustez do sistema; a criação do formulário de registro de dados usando o ModelForm;  Agora é hora de evoluir e expandir um pouco o sistema criado. Nessa publicação vamos criar validadores de longitude e latitude para poder restringir a inserção de dados a uma determinada região. Com isso, o próximo passo (e artigo) será criar o webmap no nosso sistema. Mas isso fica para breve.\nVamos ao que interessa:\nCriando validadores de longitude e latitude Sobre os validadores: Os validadores (validators, em inglês) fazem parte do sistema de validação de formulários e de campos do Django. Ao criarmos campos de uma determinada classe no nosso modelo, como por exemplo integer, o Django cuidará automaticamente da validação do valor passado a este campo pelo formulário, retornando um erro quando o usuário ingressar um valor de texto no campo em questão, por exemplo. O interessante é que além dos validadores já implementados para cada classe, podemos criar outros, conforme a nossa necessidade.\n Por que necessitamos um validador para os campos de latitude e longitude?\n Como estou explorando o desenvolvimento de um sistema de gestão de dados geográficos com recursos limitados, ou seja, sem uma infraestrutura de operações e consultas espaciais, não poderei consultar se o par de coordenadas inserido pelo usuário está contido nos limites de um determinado estado (uma operação clássica com dados geográficos). Não ter essa possibilidade de validação poderá colocar em risco a qualidade do dado inserido.\nE como não se abre mão quando a questão é qualidade, uma saída será a criação de validadores personalizados para os campos de latitude e longitude, garantindo que esses possuem valores condizentes à nossa área de interesse.\nO que precisamos saber: os validators são funções que recebem um valor, apenas (neste caso, o valor inserido pelo usuário no campo a ser validado), que passará por uma lógica de validação retornando um ValidationError quando o valor inserido não passar na validação. Com o ValidationError podemos customizar uma mensagem de erro, indicando ao usuário o motivo do valor não ter sido considerado válido, para que o mesmo corrija.\nEntão, criarei validadores dos campos de latitude e longitude para sempre que entrarem com valores que não contemplem a área do estado do Rio de Janeiro, um ValidationError será retornado.\n ⚠️ Essa não é uma solução ótima já que, dessa forma, estamos considerando o bounding box do estado em questão, e com isso haverá áreas onde as coordenadas serão válidas, ainda que não estejam internas ao território estadual. Ainda assim, acredito que seja uma solução boa suficiente para alguns casos, principalmente por não depender de toda infraestrutura de GIS.\n O que é um bounding box?\nBounding box poderia ser traduzido por \u0026ldquo;retângulo envolvente\u0026rdquo; do estado, ou de uma feição espacial. Na imagem abaixo, vemos o território do estado do Rio de Janeiro e o retângulo envolvente que limita as suas coordenadas máximas e mínimas de longitude e latitude.\nPercebam que, como mencionado antes, o que conseguimos garantir é que os pares de coordenadas estejam em alguma área interna ao retângulo em questão o que não garante que as mesmas estejam no território do estado do Rio de Janeiro.\nPor uma questão de organização, criei no settings.py do meu projeto as variáveis com os valores máximos e mínimos de latitude e longitude. Essa proposta surgiu do cuducos, e achei que valia a pena implementar. Entendo que é mais organizado e evita possíveis falhas humanas, caso os mesmos valores tenham que ser usados em outras partes do sistema.\nAo fim do meu settings.py, adicionei:\n# settings.py BOUNDING_BOX_LAT_MAX = -20.764962 BOUNDING_BOX_LAT_MIN = -23.366868 BOUNDING_BOX_LON_MAX = -40.95975 BOUNDING_BOX_LON_MIN = -44.887212  Agora, sim. Vamos criar os testes:\n se você não entendeu o motivo pelo qual eu começo criando testes, dá uma olhada na primeira publicação. Nela comento um pouco sobre a abordagem Test Driven Development (TDD).\n Criando os testes: No tests.py, criei uma nova classe de teste TestCase, com o objetivo de testar os validadores simulando o uso do FenomenoForm. Por isso criei staticmethod chamado create_form que cria um dicionário com chaves e valores válidos do formulário em questão, que ao receber um conjunto de argumentos nomeados **kwargs terá tais argumentos atualizados e usados para instanciar e retornar o FenomenoForm.\nFiz isso para, a cada teste, ter uma instância do FenoenoForm alterando apenas os campos que quero simular valores a serem validados, sem ter que passar sempre todos os valores do ModelForm. Assim, eu posso criar diferentes métodos de Test Case, usando o método criado anteriormente alterando o valor inicial a um inválido, testando se de fato um ValidationError é retornado.\n# tests.py class FenomenoFormValidatorsTest(TestCase): @staticmethod def create_form(**kwargs): valid_form = { 'nome': 'Teste', 'data': '2020-01-01', 'hora': '09:12:12', 'longitude': -42, 'latitude': -21} valid_form.update(**kwargs) form = FenomenoForm(valid_form) return form  Nos métodos de teste uso primeiro o assertFalse do método de validação do formulário (form.is_valid()) para confirmar que o mesmo não é valido para, em seguida, testar com o assertEqual se o texto da mensagem de erro é o que esperamos. Veja o link a seguir para saber sobre outros assertions.\n# tests.py def test_max_longitude_raises_error(self): form = self.create_form(longitude='-45') self.assertFalse(form.is_valid()) self.assertEqual(form.errors[\u0026quot;longitude\u0026quot;][0], 'Coordenada longitude fora do contexto do estado do Rio de Janeiro') def test_min_longitude_raises_error(self): form = self.create_form(longitude='-40') self.assertFalse(form.is_valid()) self.assertEqual(form.errors[\u0026quot;longitude\u0026quot;][0], 'Coordenada longitude fora do contexto do estado do Rio de Janeiro') def test_max_latitude_raises_error(self): form = self.create_form(latitude='-24') self.assertFalse(form.is_valid()) self.assertEqual(form.errors[\u0026quot;latitude\u0026quot;][0], 'Coordenada latitude fora do contexto do estado do Rio de Janeiro') def test_min_latitude_raises_error(self): form = self.create_form(latitude='-19') self.assertFalse(form.is_valid()) self.assertEqual(form.errors[\u0026quot;latitude\u0026quot;][0], 'Coordenada latitude fora do contexto do estado do Rio de Janeiro')  Fazemos rodar os testes e teremos erros como esses:\nCreating test database for alias 'default'... System check identified no issues (0 silenced). ...E.E.. ====================================================================== ERROR: test_max_latitude (map_proj.core.tests.FenomenoFormValidatorsTest) ---------------------------------------------------------------------- Traceback (most recent call last): File \u0026quot;/media/felipe/DATA/Repos/Django_Leaflet_Test/map_proj/core/tests.py\u0026quot;, line 78, in test_max_latitude self.assertEqual(form.errors[\u0026quot;latitude\u0026quot;][0], 'Coordenada latitude fora do contexto do estado do Rio de Janeiro') KeyError: 'latitude' ====================================================================== ERROR: test_min_latitude (map_proj.core.tests.FenomenoFormValidatorsTest) ---------------------------------------------------------------------- Traceback (most recent call last): File \u0026quot;/media/felipe/DATA/Repos/Django_Leaflet_Test/map_proj/core/tests.py\u0026quot;, line 83, in test_min_latitude self.assertEqual(form.errors[\u0026quot;latitude\u0026quot;][0], 'Coordenada latitude fora do contexto do estado do Rio de Janeiro') KeyError: 'latitude' ---------------------------------------------------------------------- Ran 8 tests in 0.012s FAILED (errors=2) Destroying test database for alias 'default'...  Ou seja, o forms após ser validado deveria conter um atributo errors tendo como chave o nome do campo que apresentou dados inválidos. Como não temos os validadores criados, nenhum erro de validação foi acusado no campo de latitude.\nCriando e usando validadores: Para superá-los criamos, enfim, os validadores em um arquivo validators.py. Percebam que é nesse ponto que usarei os valores máximos e mínimos de latitude e longitude adicionados no settings.py:\n# validators.py from django.core.exceptions import ValidationError from django.conf import settings def validate_longitude(lon): if lon \u0026lt; settings.BOUNDING_BOX_LON_MIN or lon \u0026gt; settings.BOUNDING_BOX_LON_MAX: raise ValidationError(\u0026quot;Coordenada longitude fora do contexto do estado do Rio de Janeiro\u0026quot;, \u0026quot;erro longitude\u0026quot;) def validate_latitude(lat): if lat \u0026lt; settings.BOUNDING_BOX_LAT_MIN or lat \u0026gt; settings.BOUNDING_BOX_LAT_MAX: raise ValidationError(\u0026quot;Coordenada latitude fora do contexto do estado do Rio de Janeiro\u0026quot;, \u0026quot;erro latitude\u0026quot;)  Com esses validadores estou garantindo que ambos latitude e longitude estejam na área de interesse e, caso contrário, retorno um erro informando ao usuário.\nE é preciso adicioná-los ao forms.py para que sejam usados:\n# forms.py from map_proj.core.validators import validate_longitude, validate_latitude class FenomenoForm(ModelForm): longitude = FloatField(validators=[validate_longitude]) latitude = FloatField(validators=[validate_latitude]) ...  No desenvolvimento dessa solução percebi pelos testes criados que, ao informar uma latitude ou longitude que não passe pela validação, a criação do campo geom se tornava inválido por não receber um desses valores, gerando dois erros: o de validação do campo e o de validação do campo geom. Lembre-se que é no método clean do formulário que o campo geom recebe os valores de longitude e latitude formando uma classe geojson para, logo em seguida ser validado.\nPara evitar isso, alterei o método clean de forma garantir que o campo geom só seja criado e validado, quando ambos valores (longitude e latitude) existirem. Ou seja, tenham passado pelos validadores sem erro.\n#forms.py def clean(self): cleaned_data = super().clean() lon = cleaned_data.get('longitude') lat = cleaned_data.get('latitude') if not all((lon, lat)): raise ValidationError('Erro em latitude ou longitude') cleaned_data['geom'] = Point((lon, lat)) if not cleaned_data['geom'].is_valid: raise ValidationError('Geometria inválida') return cleaned_data   Outro ponto (na verdade, erro) importante que só percebi a partir dos testes é que no forms.py eu não estava considerando o campo geom na lista de fields a serem usados. Com isso o mesmo não é passado ao banco de dados, mesmo passando pelo método clean que o cria.\n Por esse motivo, tive que alterar algumas coisas no forms.py:\n Inseri o campo geom à tupla de fields do forms.py. Inseri o campo geom com um widget de HiddenInput. Esse último, o fiz por se tratar de um campo que não quero expor ao usuário, já que será criado automaticamente no método clean.  Finalmente, a classe Meta do forms.py ficou da seguinte forma:\nclass Meta: model = Fenomeno fields = ('nome', 'data', 'hora', 'latitude', 'longitude', 'geom') widgets = {'geom': HiddenInput()}  Pronto, com tudo isso que fizemos, já temos um sistema que, apesar de não poder fazer consultas espaciais, é capaz de validar os campos de latitude e longitude.\nNo próximo artigo, vou abordar sobre o que está por trás de toda mágica de um webmap, usando o módulo django-leaflet. Enquanto isso, dê uma olhada no que tenho desenvolvido.\nArtigo publicado também no linkedin\n","date":1625961600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1626052857,"objectID":"bb3c87cbb7273415a6b0c046aafa4b62","permalink":"/post/criando-um-sistema-para-gestao-de-dados-geograficos-de-forma-simples-e-robusta-ii/","publishdate":"2021-07-11T00:00:00Z","relpermalink":"/post/criando-um-sistema-para-gestao-de-dados-geograficos-de-forma-simples-e-robusta-ii/","section":"post","summary":"Criando um sistema para gestão de dados geográficos de forma simples e robusta II Artigo publicado também no linkedin\nNa primeira publicação onde exploro a possibilidade de implementar um sistema de gestão de dados geoespaciais com Django, sem a necessidade de usar um servidor com PostGIS, vimos sobre:","tags":["pt-br","Python","Django"],"title":"Criando um sistema para gestão de dados geográficos de forma simples e robusta II","type":"post"},{"authors":[],"categories":["Python"],"content":"Criando um sistema para gestão de dados geográficos de forma simples e robusta Artigo publicado também no linkedin.\nHá algum tempo comecei a estudar sobre desenvolvimento de sistema com Python, usando a framework Django. Decidi expor alguns aprendizados em uma serie de artigos. A ideia é que esses textos me ajudem na consolidação do conhecimento e, ao tê-los publicado, ajudar a outros que tenham interesse na área.\nAproveito para deixar meu agradecimento ao Cuducos que, tanto neste artigo, como em todos meus estudos tem sido um grande mentor. Vamos ao que interessa:\nPor simples, entende-se:\n Um sistema sem a necessidade da instalação e configuração de base de dados PostgreSQL/GIS, Geoserver, etc; Um sistema clássico tipo Create, Retrieve, Update, Delete (CRUD) para dados geográficos; Um sistema que não demande operações e consultas espaciais; Mas um sistema que garanta a qualidade na gestão dos dados geográficos;  Visão geral da proposta: Vamos criar um ambiente virtual Python e instalar a framework Django, para criar o sistema, assim como alguns módulos como jsonfield, que nos vai habilitar a criação de campos JSON em nossa base de dados; django-geojson, que depende do jsonfield e será responsável por habilitar instâncias de dados geográficos, baseando-se em JSON; geojson, que possui todas as regras básicas de validação de dados geográficos, usando a estrutura homônima, geojson.\nO uso desses três módulos nos permitirá o desenvolvimento de um sistema de gestão de dados geográficos sem a necessidade de termos instalado um sistema de gerenciamento de dados geográficos, como o PostGIS. Sim, nosso sistema será bem limitado a algumas tarefas. Mas em contrapartida, poderemos desenvolvê-lo e implementar soluções \u0026ldquo;corriqueiras\u0026rdquo; de forma facilitada.\nNo presente exemplo estarei usando SQLite, como base de dados.\nNosso projeto se chamará de map_proj. E nele vou criar uma app, dentro da pasta do meu projeto Django, chamada core. Essa organização e nomenclatura usada, vem das sugestões do Henrique Bastos. Afinal, o sistema está nascendo. Ainda que eu tenha uma ideia do que ele será, é interessante iniciar com uma aplicação \u0026ldquo;genérica\u0026rdquo; e a partir do momento que o sistema se torne complexo, poderemos desacoplá-la em diferentes aplicações.\nCriando ambiente de desenvolvimento, projeto e nossa app: python -m venv .djleaflet # cria ambiente virtual python # ativando o ambiente virtual: source ./venv/bin/activate # atualizando o pip pip install --upgrade pip # intalando os módulos a serem usados pip install django jsonfield django-geojson geojson # criando projeto django-admin startproject map_proj . # criando app dentro do projeto cd map_proj python manage.py startapp core # criando a base de dados inicial python manage.py migrate # criando superusuário python manage.py createsuperuser  Adicionando os módulos e a app ao projeto Agora é adicionar ao map_proj/settings.py, a app criada e os módulos que usaremos.\n# setting.py INSTALLED_APPS = [ ... 'djgeojson', 'map_proj.core', ]  Perceba que para poder acessar as classes de alto nível criadas pelo pacote djgeojson, teremos que adicioná-lo ao INSTALLED_APPS do settings.py.\nCriando a base de dados Ainda que eu concorde com o Henrique Bastos, que a visão de começar os projetos Django pelo models.py é um tanto \u0026ldquo;perigosa\u0026rdquo;, por colocar ênfase em uma parte da app e, em muitos casos, negligenciar vários outros atributos e ferramentas que o Django nos oferece, irei desconsiderar sua abordagem. Afinal, o objetivo deste artigo não é explorar todo o potencial do Django, mas sim apresentar uma solução simples no desenvolvimento e implementação de um sistema de gestão de dados geográficos para servir como ferramenta de estudo e projeto prático.\nEm models.py usaremos instâncias de alto nível que o Django nos brinda para criar e configurar os campos e as tabelas que teremos em nosso sistema, bem como alguns comportamentos do sistema.\nComo estou desenvolvendo um sistema multi propósito, vou tentar mantê-lo bem genérico. A ideia é que vocês possam imaginar o que adequar para um sistema especialista na sua área de interesse. Vou criar, então, uma tabela para mapear \u0026ldquo;fenômenos\u0026rdquo; (quaisquer). Esse modelo terá os campos nome, data, hora e geometria, a qual será uma instância de PointField.\nO PointField é uma classe criada pelo djgeojson que nos permite usar um campo para dados geográficos sem ter toda a infraestrutura do PostGIS, instalada, por exemplo. Nesse caso, estou simulando um campo de ponto, mas, de acordo com a documentação do pacote, todas as geometrias usadas em dados espaciais são suportadas:\n All geometry types are supported and respectively validated : GeometryField, PointField, MultiPointField, LineStringField, MultiLineStringField, PolygonField, MultiPolygonField, GeometryCollectionField. ( djgeojson )\n # models.py from django.db import models from djgeojson.fields import PointField class Fenomeno(models.Model): nome = models.CharField(max_length=100, verbose_name='Fenomeno mapeado') data = models.DateField(verbose_name='Data da observação') hora = models.TimeField() geom = PointField(blank=True) def __str__(self): return self.nome  Percebam que eu importo de djgeojson a classe PointField. O que o django-geojson fez foi criar uma classe [com estrutura de dados geográfico] de alto nível, mas que no banco de dados será armazenado em um campo JSON. Vale a pena deixar claro: não espero que o usuário do meu sistema saiba preencher o campo geom em formato JSON. Por isso, criarei no forms.py, os campos latitude e longitude e a partir deles, o campo geom será preenchido. Detalharei esse processo mais adiante.\nPronto, já temos o modelo da \u0026lsquo;tabela de dados \u0026ldquo;geográficos\u0026rdquo;\u0026rsquo;, mas esse modelo ainda não foi registrado em nossa base. Para isso:\npython manage.py makemigrations python manage.py migrate  O makemigrations analisa o models.py e o compara com a versão anterior identificando as alterações e criando um arquivo que será executado pelo migrate, aplicando tais alterações ao banco de dados. Aprendi com o Henrique Bastos e Cuducos que o migrate é um sistema de versionamento da estrutura do banco de dados, permitindo retroceder, quando necessário, a outras versões.\nCriando o formulário Vou aproveitar algumas \u0026ldquo;pilhas já incluídas\u0026rdquo; do Django, ao usar o ModelForm para criar o formulário para o carregamento de dados. O ModelForm facilita esse processo.\nAliás, é importante pensar que os formulários do Django vão muito além da \u0026ldquo;carga de dados\u0026rdquo;, já que são os responsáveis por cuidar da interação com o usuário e o(s) processo(s) de validação e limpeza dos dados preenchidos.\nDigo isso, pois ao meu FenomenosForm, eu sobreescrevo o método clean(), que cuida da validação e limpeza do formulário e incluo nele:\n a construção dos dados do campo geom a partir dos valores dos campos de latitude e longitude (criados exclusivamente para a gerção do campo geom); a validação do campo geom;  # forms.py from django.core.exceptions import ValidationError from django.forms import ModelForm, FloatField from map_proj.core.models import Fenomeno from geojson import Point class FenomenoForm(ModelForm): longitude = FloatField() latitude = FloatField() class Meta: model = Fenomeno fields = ('nome', 'data', 'hora', 'latitude', 'longitude') def clean(self): cleaned_data = super().clean() lon = cleaned_data.get('longitude') lat = cleaned_data.get('latitude') cleaned_data['geom'] = Point((lon, lat)) if not cleaned_data['geom'].is_valid: raise ValidationError('Geometria inválida') return cleaned_data  Ainda que pareça simples, não foi fácil chegar a essa estratégia de estruturação dos models e forms. Contei com a ajuda e paciencia do Cuducos. Inicialmente eu mantinha latitude e longitude no meu models. Mas fazendo assim, além de ter uma redundância de dados e uma abertura a erros potenciais, estaria armazenando dados que não devo usar depois de contruir o campo geom. Uma alternativa, discutida com o Cuducos foi de ter tanto latitude como longitude no models, mas o atributo geom como propriedade. Ainda que seja uma estratégia consistente, a redundância se mantém.\nO processo de validação do campo geom também foi fruto de muita discussão. De forma resumida, percebi que o djgeojson apenas valida o tipo de geometria do campo e não a sua consistência. Ao conversar com os desenvolvedores, me disseram que toda a lógica de validação de objetos geojson estavam sendo centralizados no módulo homônimo.\nPor isso eu carrego a classe Point do módulo geojson e designo o campo geom como instância dessa classe. Assim, passo a poder contar com um processo de validação mais consistente, como o método is_valid, usado anteriormente.\nMas e o teste? Pois é, eu adoraria apresentar isso usando a abordagem Test Driven Development (TDD). Mas, talvez pela falta de prática, conhecimento e etc, vou apenas apontar onde e como eu testaria esse sistema. Faço isso como uma forma de estudo, mesmo. Também me pareceu complicado apresentar a abordagem TDD em um artigo, já que a mesma se faz de forma incremental.\nSobre TDD Com o Henrique Bastos e toda a comunidade do Welcome to The Django vi que essa abordagem é tanto filosófica quanto técnica. É praticamente \u0026ldquo;Chora agora, ri depois\u0026rdquo;, mas sem a parte de chorar. Pois com o tempo as coisas ficam mais claras\u0026hellip; Alguns pontos:\n O erro não é para ser evitado no processo de desenvolvimento, mas sim quando estive em produção. Logo, Entenda o que você quer do sistema, crie um teste antes de implementar e deixe o erro te guiar até ter o que deseja; Teste o comportamento esperado e não cada elemento do sistema;  Sem mais delongas:\nO que testar? Vamos usar o arquivo tests.py e criar nossos testes lá. Ao abrir vocês vão ver que já está o comando importando o TestCase.\n Mas o que vamos testar?\n Como pretendo testar tanto a estrutura da minha base de dados, quanto o formulário e, de quebra, a validação do meu campo geom, faço o import do modelo Fenomenos e do form FenomenosForm.\n⚠️ Essa não é uma boa prática. O ideal é criar uma pasta para os testes e separá-los em arquivos distintos. Um para cada elemento do sistema (model, form, view, etc).\nO primeiro teste será a carga de dados. Então, vou instanciar um objeto com o resultado da criação de um elemento do meu model Fenomeno. Faço isso no setUp, para não ter que criá-lo sempre que for fazer um teste relacionado à carga de dados.\nO teste seguinte será relacionado ao formulário e por isso instancio um formulário com os dados carregados e testo a sua validez. Ao fazer isso o formulário passa pelo processo de limpeza, onde está a construção e validação do campo geom. Se qualquer campo for preenchido com dados errados ou inadequados, o django retornará False ao método is_valid. Ou seja, se eu tiver construido o campo geom de forma equivocada, passando mais ou menos parâmetros que o esperado o nosso teste irá avisar, evitando surpresas.\n# tests.py from django.test import TestCase from geojson import Point from map_proj.core.models import Fenomeno from map_proj.core.forms import FenomenoForm class ModelGeomTest(TestCase): def setUp(self): self.fenomeno = Fenomeno.objects.create( nome='Arvore', data='2020-11-06', hora='09:30:00' ) def test_create(self): self.assertTrue(Fenomeno.objects.exists()) class FenomenoFormTest(TestCase): def setUp(self): self.form = FenomenoForm({ 'nome': 'Teste', 'data': '2020-01-01', 'hora': '09:12:12', 'longitude': -45, 'latitude': -22}) self.validation = self.form.is_valid() def test_form_is_valid(self): \u0026quot;\u0026quot;\u0026quot;\u0026quot;form must be valid\u0026quot;\u0026quot;\u0026quot; self.assertTrue(self.validation) def test_geom_coordinates(self): \u0026quot;\u0026quot;\u0026quot;after validating, geom have same values of longitude and latitude\u0026quot;\u0026quot;\u0026quot; self.assertEqual(self.form.cleaned_data['geom'], Point( (self.form.cleaned_data['longitude'], self.form.cleaned_data['latitude']))) def test_geom_is_valid(self): \u0026quot;\u0026quot;\u0026quot;geom must be valid\u0026quot;\u0026quot;\u0026quot; self.assertTrue(self.form.cleaned_data['geom'].is_valid)  ⚠️ Reparem que:\n No test_create() eu testo se existem objetos inseridos no model Fenomeno. Logo, testo se o dado criado no setUp foi corretamente incorporado no banco de dados. Na classe FenomenosFormTest eu crio uma instância do meu modelForm e realizo três testes:  test_form_is_valid() estou testando se os dados carregados são condizentes com o informado no model e, pelo fato desse método usar o método clean(), posso dizer que estou testando indiretamente a validez do campo geom. Caso ele não fosse válido, o form também não seria válido. Em test_geom_coordinates() testo se após a validação o campo geom foi criado como esperado (como uma instância de Point com os dalores de longitude e latitude). O teste test_geom_is_valid() serve para garantir que a contrução do campo geom é valido. Ainda que ao testar se o formulário é valido eu estaria implicitamente testando a validez do campo geom, esse teste serve para garantir a criação válida do campo. Afinal, por algum motivo (como por exemplo, refatoração), pode ser que façamos alguma alteração no método clean() que mantenha o formulário como válido mas deixe de garantir a validez do campo geom.    A diferença entre as classes de teste criadas está no fato de ao inserir os dados usando o método create() - e aconteceria o mesmo se estivesse usando o save() -, apenas será validado se o elemento a ser inserido é condizente com o tipo de coluna no banco de dados. Vale deixar claro: Dessa forma, eu não estou validando a consistência do campo geom, já que o mesmo, caso seja informado, será salvo com sucesso sempre que represente um JSON.\nEsse fato é importante para reforçar o entendimento de que o djgeojson implementa classes de alto nível a serem trabalhados em views e models. No banco, mesmo, temos um campo de JSON. Enquanto que, para poder validar a consistência do campo geom, preciso passar os dados pelo formulário onde, no processo de limpeza do mesmo, o campo será criado e validado usando o módulo geojson. Por isso a classe com os testes relacionados ao comportamento do formulário.\nRegistrando modelo no admin Para facilitar, vou usar o django-admin. Trata-se de uma aplicação já criada onde basta registrar os modelos e views que estamos trabalhando para termos uma interface \u0026ldquo;frontend\u0026rdquo; genérica.\n#admin.py from django.contrib import admin from map_proj.core.models import Fenomeno from map_proj.core.forms import FenomenoForm class FenomenoAdmin(admin.ModelAdmin): model = Fenomeno form = FenomenoForm admin.site.register(Fenomeno, FenomenoAdmin)  To be continued\u0026hellip; Até o momento já temos algo bastante interessante: um sistema de CRUD que nos permite adicionar, editar e remover dados geográficos. Talvez você esteja pensando consigo mesmo:\n \u0026ldquo;OK. Mas o que foi feito até agora, poderia ter sido feito basicamente com uma base de dados que possuam as colunas latitude e longitude\u0026rdquo;.\n Eu diria que sim, até certo ponto. Uma grande diferença, eu diria, da forma como foi implementada é o uso das ferramentas de validação dos dados com o módulo geojson.\nA ideia é, a seguir (e seja lá quando isso for), extender a funcionalidade do sistema ao implementar um webmap para visualizar os dados mapeados.\nArtigo publicado também no linkedin.\n","date":1620345600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1626053112,"objectID":"b283e7331b7caf56017e55eb67d7ae6a","permalink":"/post/criando-um-sistema-para-gestao-de-dados-geograficos-de-forma-simples-e-robusta/","publishdate":"2021-05-07T00:00:00Z","relpermalink":"/post/criando-um-sistema-para-gestao-de-dados-geograficos-de-forma-simples-e-robusta/","section":"post","summary":"Criando um sistema para gestão de dados geográficos de forma simples e robusta Artigo publicado também no linkedin.\nHá algum tempo comecei a estudar sobre desenvolvimento de sistema com Python, usando a framework Django.","tags":["Django","Python","pt-br"],"title":"Criando um sistema para gestão de dados geográficos de forma simples e robusta","type":"post"},{"authors":[],"categories":["R"],"content":" Nas últimas semanas estive trabalhando em um projeto com dados atmosféricos. Tem sido de grande aprendizado não apenas por ser uma temática nova, mas também pela demanda de processamento de dados.\nOs aprendizados relacionados ao processamento de dados (sua otimização, claro), serão abordados em artigos ainda em produção. Mas um ponto fundamental e que percebi ser ignorado pela maioria, e neste sentido me incluo, é a estrutura de dados dos arquivos raster em netCDF.\nJá vi, e já respodi a muitas pessoas perguntando como carregar dados netCDF no R, com um simples “com o pacote raster, ora bolas”. No pior das hipóteses, teremos apenas que instalar uma dependencia que é o pacote ncdf4.\nPois é, os dados atmosféricos que tenho trabahado estão em formato netCDF. E usar o pacote raster para carregá-lo e manipulá-lo, me foi útil enquanto a análise era exploratória. Ao ver o volume de dados crescer de três dias para dois meses e, em seguida para dois anos de dados produzidos a cada três horas do dia, todos os dias, totalizando 731 arquivos, percebi que precisaria deixar de preguiça e entender esse tal de netCDF.\nLendo sobre o pacote ncdf41, o formato netCDF é descrito da seguinte forma:\n “binary data files that are portable across platforms and include metadata information in addition to the data sets.”\n Acho nesse fragmento já dá para entender a importância do formato, não?\nVamos entender isso? Vejam a diferença:\nlibrary(raster) ## Loading required package: sp (r.ppm25 \u0026lt;- stack(\u0026quot;./rasters/ppm25_2019-06-30.nc\u0026quot;)) ## Loading required namespace: ncdf4 ## class : RasterStack ## dimensions : 59, 75, 4425, 6 (nrow, ncol, ncell, nlayers) ## resolution : 0.4, 0.4 (x, y) ## extent : -74.19, -44.19, -18.24, 5.36 (xmin, xmax, ymin, ymax) ## crs : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 ## names : X2019.06.30.12.00.00, X2019.06.30.15.00.00, X2019.06.30.18.00.00, X2019.06.30.21.00.00, X2019.07.01.00.00.00, X2019.07.01.03.00.00 Aos que já trabalham com o pacote raster e conhecem os dados raster, poderão ver que, sim, ainda que dependendo do ncdf4, o raster carrega os dados, aparentemente, sem grandes problemas. O mínimo esperado está aí. Um raster, com um extent, linhas, colunas, células, layers…\nMas, se os dados estão em netCDF, e esse tipo de dados permite armazenar metadados também, cadê eles?\nPois é. Ao ignorar isso, passava por cima desse detalhe como um marreteiro diante de um parafuso.\nVamos abrir o arquivo com o ncdf4 para começar a identificar alguns pontos importantes, que, por sinal não ficam “apenas” no metadados:\nlibrary(ncdf4) (nc.ppm25 \u0026lt;- nc_open(\u0026quot;./rasters/ppm25_2019-06-30.nc\u0026quot;)) ## File ./rasters/ppm25_2019-06-30.nc (NC_FORMAT_64BIT): ## ## 1 variables (excluding dimension variables): ## short pm2p5[longitude,latitude,time] ## scale_factor: 9.668789576322e-12 ## add_offset: 3.16807559257767e-07 ## _FillValue: -32767 ## missing_value: -32767 ## units: kg m**-3 ## long_name: Particulate matter d \u0026lt; 2.5 um ## standard_name: mass_concentration_of_pm2p5_ambient_aerosol_particles_in_air ## ## 3 dimensions: ## longitude Size:75 ## units: degrees_east ## long_name: longitude ## latitude Size:59 ## units: degrees_north ## long_name: latitude ## time Size:6 *** is unlimited *** ## units: hours since 1900-01-01 00:00:00.0 ## long_name: time ## calendar: gregorian ## ## 2 global attributes: ## Conventions: CF-1.6 ## history: 2021-03-17 20:27:56 GMT by grib_to_netcdf-2.20.0: grib_to_netcdf /data/scratch/20210317-2020/8e/_mars-webmars-public-svc-blue-001-6fe5cac1a363ec1525f54343b6cc9fd8-ZAB6WD.grib -o /data/scratch/20210317-2020/b1/_grib2netcdf-webmars-public-svc-blue-000-6fe5cac1a363ec1525f54343b6cc9fd8-VDR6DW.nc -utime Antes de comentar toda riqueza e detalhamento de informação que nos brinda o ncdf4, percebam que o comando é nc_open(). Não importa de o dado tem uma ou mais “bandas” ou “camadas”. Isso me chamou atenção pois, como acham que vou saber a quantidade de camadas do dados que vou abrir, se ainda não o conheço? Mas enfim. Vamos ao mais importante, os detalhes:\nVeja a estruturação. No arquivo em questão, eu tenho uma variável apenas, que possui vários metadados, garantindo minimamente sua compreensão, como: short_name, no caso “pm2p5”, units, para descrever a unidade do dado, long_name e standart_name, além de vários outros.\nE vejam também que são identificadas três dimensões: longitude, latitude e time;\nEis que chegamos ao cubo de dados, não faz sentido?\nEu tenho uma variável (ppm\u0026lt;2.5) medida para uma mesma área (cena) ao longo do tempo. O netCDF, como está preparado e pensado para esse tipo de situação já entende os dados como informação de dadta e hora (!) e os organiza como uma dimensão do dado e não atributo. O raster, por ter outros objetivos, carrega tudo como um stack (empilhamento de camadas) e adiciona uma string “X” ao nome das camadas, já que as mesmas são numéricas e o pacote em questão restringe o prefixo das camadas a texto, não permitindo valores numéricos. Enfim, nos obriga a digitar mais algumas linhas de código para que o dado fique mais apresentável.\nFonte da imagem: r-spatial.github.io\n Essa forma de estruturar os dados fará todo o sentido mais à frente quando formos falar um pouco mais do processamento desses dados.\nO pacote ncdf4 está desenvolvido para o que se convêm chamar de CRUD, na área de desenvolvimento de sistemas: Create, Update and Delete. Ou, seja, a ideia é fornecer ferramentas para manipular e ter controle total dos dados, criando, abrindo, alterando dimensões ou atributos e por aí vai. Mas não para visualização nem para as análises. Essas, ficarão para os próximos artigos.\nEnquanto isso, fique à vontade em me contactar, dar uma alô lá no grupo do GeoCastBrasil, no Telegram ou no nosso canal do youtube.\n Não pretendo explorar muitos detalhes, mas o nome do pacote (ncdf4) faz referência à versão 4 de estratura em questão. Portanto, caso você esteja, por algum motivo, usando um arquivo netCDF com versão anterior, o pacote ncdf segue disponível, ainda que descontinuado.↩\n   ","date":1615939200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1616033847,"objectID":"9df6eaa827f7e8f7f0cdb3ac35ab20ff","permalink":"/post/netcdf/","publishdate":"2021-03-17T00:00:00Z","relpermalink":"/post/netcdf/","section":"post","summary":"Entenda o porquê o netCDF é um grande aliado","tags":["pt-br","R"],"title":"Para quem só sabe usar martelo, todo problema é um prego. Até rasters em formato netCDF.","type":"post"},{"authors":null,"categories":null,"content":"","date":1614211200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1614211200,"objectID":"07aa2289a2d0c3025ef7cf6ac0402ed6","permalink":"/post/o-manifesto-nooscope/","publishdate":"2021-02-25T00:00:00Z","relpermalink":"/post/o-manifesto-nooscope/","section":"post","summary":"Manifesto Nooscope usa alguns conceitos da fotografia, da cartografía como metáfora para destrinchar alguns pontos pouco comentado sobre os algoritmos de Inteligência Artificial - compressões, sintetizações e distorções.","tags":["Inteligência Artificial","pt-br"],"title":"O Manifesto Nooscope","type":"post"},{"authors":null,"categories":null,"content":"","date":1611532800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1611532800,"objectID":"f176c122df3319e489388b50266a64b0","permalink":"/post/cientista-dados-geograficos-como-cheguei-aqui/","publishdate":"2021-01-25T00:00:00Z","relpermalink":"/post/cientista-dados-geograficos-como-cheguei-aqui/","section":"post","summary":"De um processo de reflexão, compartilho com vocês a minha jornada como cientista de dados geográficos.","tags":["Autoconhecimento","Autonomia","pt-br"],"title":"Cientista de dados geográficos - Como cheguei até aqui?!","type":"post"},{"authors":["Felipe Sodré Mendes Barros"],"categories":null,"content":" Create your slides in Markdown - click the Slides button to check out the example.   Supplementary notes can be added here, including code, math, and images.\n","date":1554595200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1554595200,"objectID":"557dc08fd4b672a0c08e0a8cf0c9ff7d","permalink":"/publication/preprint/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/preprint/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example preprint / working paper","type":"publication"},{"authors":[],"categories":[],"content":"Create slides in Markdown with Wowchemy Wowchemy | Documentation\n Features  Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides   Controls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E   Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)   Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = ;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\n Fragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}}  Press Space to play!\nOne  Two  Three \n A fragment can accept two optional parameters:\n class: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears   Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}}  Press the S key to view the speaker notes!\n Only the speaker can read these notes Press S key to view    Themes  black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links    night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links   Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026quot;/media/boards.jpg\u0026quot; \u0026gt;}} {{\u0026lt; slide background-color=\u0026quot;#0000FF\u0026quot; \u0026gt;}} {{\u0026lt; slide class=\u0026quot;my-style\u0026quot; \u0026gt;}}   Custom CSS Example Let\u0026rsquo;s make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; }   Questions? Ask\nDocumentation\n","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1549324800,"objectID":"0e6de1a61aa83269ff13324f3167c1a9","permalink":"/slides/example/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/slides/example/","section":"slides","summary":"An introduction to using Wowchemy's Slides feature.","tags":[],"title":"Slides","type":"slides"},{"authors":null,"categories":null,"content":"","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"78cb99c2548e240836a010152c649104","permalink":"/project/domestic-economy/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/domestic-economy/","section":"project","summary":"Chatbot de telegram criado para facilitar o registro e acompanhamento de gastos domésticos. Projeto criado como estratégia de estudos em Python e para uso pessoal.","tags":["Chatbot","Pet project","Python"],"title":"Domestic Economy chatbot","type":"project"},{"authors":null,"categories":null,"content":"","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"056aa6241ed7f11298b10a691ea89493","permalink":"/project/restoration-priorization/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/restoration-priorization/","section":"project","summary":"Spatial prioritization model for forest restoration, developed in collaboration with Julia Niemeyer and Renato Crouzeilles.","tags":["Scientific project","R"],"title":"Spatial Restoration Priorization","type":"project"},{"authors":["Felipe Sodré Mendes Barros","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software.    Create your slides in Markdown - click the Slides button to check out the example.   Supplementary notes can be added here, including code, math, and images.\n","date":1441065600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1441065600,"objectID":"966884cc0d8ac9e31fab966c4534e973","permalink":"/publication/journal-article/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/journal-article/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example journal article","type":"publication"},{"authors":["Felipe Sodré Mendes Barros","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software.    Create your slides in Markdown - click the Slides button to check out the example.   Supplementary notes can be added here, including code, math, and images.\n","date":1372636800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1372636800,"objectID":"69425fb10d4db090cfbd46854715582c","permalink":"/publication/conference-paper/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/publication/conference-paper/","section":"publication","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example conference paper","type":"publication"}]